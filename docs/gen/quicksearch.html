<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Classes RxAVACLRxAVAnalyticsRxAVClientRxAVInstallationRxAVObjectRxAVPushRxAVQueryRxAVRoleRxAVUser Classes Classes RxAVACL RxAVAnalytics RxAVClient RxAVInstallation RxAVObject RxAVPush RxAVQuery RxAVRole RxAVUser × Search results Close Documentation generated by JSDoc 3.4.3 on March 1st 2017, 11:35:11 pm using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Classes RxAVACLRxAVAnalyticsRxAVClientRxAVInstallationRxAVObjectRxAVPushRxAVQueryRxAVRoleRxAVUser LeanCloud TypeScript SDK - 一门语言，一个框架，Web &amp; Mobile 一起开发安装npm install leancloud-typescript-rx-sdk --saveAPI DocLeanCloud TypeScript SDK API Doc 研发计划 - Roadmap目前支持的模块 - Available 数据存储(RxAVObject) 数据查询(RxAVQuery) 云引擎函数(RxLeanEngine) ACL(RxAVRole &amp; RxAVACL) 短信(注册和登陆) 统计分析(RxAVAnalytics) 推送(RxAVPush) 已在计划内 - In plan 聊天 (LeanMessage) 不在计划内 - Not in plan 文件功能(上传和下载) 技术栈 - Technology stack为什么选择 TypeScript 开发- Why TypeScript? Because Google choose it,and Microsoft made it. 为什么异步模型选择了 RxJavaScript 而不是亲儿子 Promise？- Why RxJS？因为 RxJS 可以很好解决异步和事件组合的问题。大多数 BaaS 或者 PaaS 的使用者都是倾向于服务端是一个所见即所用的东西（正如 LeanCloud 这些年以来一直致力于实现的目标一样）， 因此大多数用户都是客户端编程经验丰富，而经验丰富的客户端工程师对于异步和事件都不会陌生，而在 Rx 的编程理念中，致力于在这两者事件找到一种结合： 异步：await Task = Observable.subscribe 事件: event.emit = Observable.subscribe 也就是不管是主动和被动的行为都视为我作为一个客户端订阅了这两种行为的结果，这就是两者的共同点。 对于习惯了 Rx 的开发模之后，对客户端工程师来说很容易「深陷其中」。 正如下面的实例代码，向 LeanCloud 云端保存一个对象： let todo: RxAVObject = new RxAVObject('RxTodo'); todo.set('title', '开会'); todo.set('time', '2016-12-03'); todo.set('reminder', new Date()); todo.save().subscribe(success =&gt; { if (success) console.log(todo.objectId); });哪些时候可以使用 - Where to use?Web在 Angular2 以及 Ionic2 中均可使用，而这恰好是这个 SDK 存在的理由。 假设你要开发一个小的 Web 前端项目，你完全可以不花一毛钱租服务器，食用 LeanEngine + Angular2 + LeanCloud TypeScript SDK 这个套餐就可以开发一个不简单的项目了。 Mobile假设你要开发一个移动 App，你想做全平台 iOS &amp; Android，你就可以使用 Ionic2 做为你迭代的第一个版本的选择，因为 Ionic2 = Angular2 + Cordova，实际上你就是在开发一个 Web 项目。 × Search results Close Documentation generated by JSDoc 3.4.3 on March 1st 2017, 11:35:11 pm using the DocStrap template. "},"RxAVACL.html":{"id":"RxAVACL.html","title":"Class: RxAVACL","body":" Documentation Classes RxAVACLRxAVAnalyticsRxAVClientRxAVInstallationRxAVObjectRxAVPushRxAVQueryRxAVRoleRxAVUser Class: RxAVACL RxAVACL new RxAVACL() 基于角色的权限管理 Methods &lt;static&gt; RxAVACL(arg) Creates an instance of RxAVACL. Parameters: Name Type Argument Description arg Array.&lt;any&gt; &lt;repeatable&gt; equals(other) 判断两个 ACL 对象是否相等 Parameters: Name Type Description other RxAVACL Returns: Type boolean findWriteAccess() 查找 Write 权限 Returns: Type boolean getPublicReadAccess() 获取所有人的 Read 权限 Returns: Type boolean getPublicWriteAccess() 获取所有人的 Write 权限 Returns: Type boolean getReadAccess(userId) 获取 Read 权限 Parameters: Name Type Description userId any {(RxAVUser | RxAVRole | string)} Returns: Type boolean getRoleReadAccess(role) 设置角色的 Read 权限 Parameters: Name Type Description role any {(RxAVRole | string)} Returns: Type boolean getRoleWriteAccess(role) 获取角色的 Write 权限 Parameters: Name Type Description role any {(RxAVRole | string)} Returns: Type boolean getWriteAccess(userId) 获取 Write 权限 Parameters: Name Type Description userId any {(RxAVUser | RxAVRole | string)} userId Returns: Type boolean setPublicReadAccess(allowed) 设置所有人的 Read 权限 Parameters: Name Type Description allowed boolean setPublicWriteAccess(allowed) 设置所有人的 Write 权限 Parameters: Name Type Description allowed boolean setReadAccess(userId, allowed) 设置 Read 权限 Parameters: Name Type Description userId any {(RxAVUser | RxAVRole | string)} allowed boolean setRoleReadAccess(role, allowed) 设置角色的 Read 权限 Parameters: Name Type Description role any {(RxAVRole | string)} allowed boolean setRoleWriteAccess(role, allowed) 设置角色 Write 权限 Parameters: Name Type Description role any {(RxAVRole | string)} allowed boolean setWriteAccess(userId, allowed) 设置 Write 权限 Parameters: Name Type Description userId any {(RxAVUser | RxAVRole | string)} allowed boolean × Search results Close Documentation generated by JSDoc 3.4.3 on March 1st 2017, 11:35:11 pm using the DocStrap template. "},"RxAVAnalytics.html":{"id":"RxAVAnalytics.html","title":"Class: RxAVAnalytics","body":" Documentation Classes RxAVACLRxAVAnalyticsRxAVClientRxAVInstallationRxAVObjectRxAVPushRxAVQueryRxAVRoleRxAVUser Class: RxAVAnalytics RxAVAnalytics new RxAVAnalytics() 统计服务的操作接口 当前版本只支持启动发送，也就是每一次启动之后，需要主动调用 report 接口去把上一次统计的数据发送到云端 批量发送和最小时间间隔发送本质上也是拆分成每一个请求一次请求，容易出现发送中断等诸多原因，因此 ts sdk 只打算支持启动发送这一种方式 Methods &lt;static&gt; get() 获取本地对话的统计对象 &lt;static&gt; init() 初始化统计对象，初始化成功之后可以通过 {RxAVAnalytics.currentAnalytics} 实例对象来记录统计数据 Returns: Type Observable.&lt;boolean&gt; &lt;static&gt; report() 将上一次对话的统计数据报告给服务端 beginEevent(name [, tag] [, attributes]) 开始记录一次持续性事件 Parameters: Name Type Argument Description name string 事件的自定义名称 tag string &lt;optional&gt; 事件的附加值 attributes any &lt;optional&gt; 事件的自定义属性字典 Returns: 返回该事件的 eventId Type string beginPage(name) 开始记录一个页面的持续性访问 Parameters: Name Type Description name string 页面名称 Returns: 页面的 activitId Type string closeSesstion() 停止 session endEvent(eventId [, attributes]) 结束记录一次自定义事件 Parameters: Name Type Argument Description eventId string 事件的 eventId attributes any &lt;optional&gt; 事件的自定义属性字典 endPage(activityId) 结束记录一个页面的持续性访问 Parameters: Name Type Description activityId string 页面的 activitId save() 如果实现了本地缓存的接口，那么可以将本地统计数据保存在本地的缓存内 Returns: 发送结果，可能因为并没有实现本地缓存的接口而导致失败 Type Observable.&lt;boolean&gt; send() 主动发送本次统计数据 Returns: 发送结果，可能因为数据格式不正确而造成服务端拒收 Type Observable.&lt;boolean&gt; trackAppOpened() 标记本次应用打开来自于用户手动从图标点开进入 trackAppOpenedWithPush(pushData) 标记本次应用打开来自于用户点击推送通知打开进入 Parameters: Name Type Description pushData any :{ [key: string]: any } 推送内容包含的参数字典 trackEvent(name [, tag] [, attributes]) 记录一次自定义事件 Parameters: Name Type Argument Description name string 事件的自定义名称 tag string &lt;optional&gt; 时间的附加值 attributes any &lt;optional&gt; 事件的自定义属性字典 Returns: 自定义事件的 ID Type string trackPage(name, duration) 记录一个页面的访问时间 Parameters: Name Type Description name string 页面名称 duration number 访问持续的时间，毫秒 Returns: 页面的 activitId Type string × Search results Close Documentation generated by JSDoc 3.4.3 on March 1st 2017, 11:35:11 pm using the DocStrap template. "},"RxAVClient.html":{"id":"RxAVClient.html","title":"Class: RxAVClient","body":" Documentation Classes RxAVACLRxAVAnalyticsRxAVClientRxAVInstallationRxAVObjectRxAVPushRxAVQueryRxAVRoleRxAVUser Class: RxAVClient RxAVClient new RxAVClient() SDK 核心类，包含了基础的功能模块 Methods &lt;static&gt; init({{) 初始化 SDK Parameters: Name Type Description {{ any appId: string, appKey: string, region?: string, serverUrl?: string, log?: boolean, pluginVersion?: number, plugins?: { storage?: IStorage, device?: IDeviceInfo } }} config × Search results Close Documentation generated by JSDoc 3.4.3 on March 1st 2017, 11:35:11 pm using the DocStrap template. "},"RxAVInstallation.html":{"id":"RxAVInstallation.html","title":"Class: RxAVInstallation","body":" Documentation Classes RxAVACLRxAVAnalyticsRxAVClientRxAVInstallationRxAVObjectRxAVPushRxAVQueryRxAVRoleRxAVUser Class: RxAVInstallation RxAVInstallation new RxAVInstallation() 安装数据 Extends RxAVObject Methods &lt;static&gt; current() 获取当前的 RxAVInstallation 对象 Returns: 异步操作可能会失败 Type Observable.&lt;RxAVInstallation&gt; &lt;static&gt; get() 获取 installationId &lt;static&gt; get() 在调用本方法之前，请务必确保你已经调用了 RxAVInstallation.current() &lt;static&gt; get() 获取频道 &lt;static&gt; get() 获取设备所在的地区/时区 &lt;static&gt; set() 设置频道 fetch() 从服务端获取数据覆盖本地的数据 Inherited From: RxAVObject#fetch Returns: Type Observable.&lt;RxAVObject&gt; fetchRelation(key, targetClassName) 查询 Relation 包含的对象数组 Parameters: Name Type Description key string targetClassName any Inherited From: RxAVObject#fetchRelation Returns: Type Observable.&lt;Array.&lt;RxAVObject&gt;&gt; remove(key) 删除指定属性上的值 Parameters: Name Type Description key string Inherited From: RxAVObject#remove save() 保存当前的 {RxAVInstallation} 到云端 Overrides: RxAVObject#save Returns: Type Observable.&lt;boolean&gt; × Search results Close Documentation generated by JSDoc 3.4.3 on March 1st 2017, 11:35:11 pm using the DocStrap template. "},"RxAVObject.html":{"id":"RxAVObject.html","title":"Class: RxAVObject","body":" Documentation Classes RxAVACLRxAVAnalyticsRxAVClientRxAVInstallationRxAVObjectRxAVPushRxAVQueryRxAVRoleRxAVUser Class: RxAVObject RxAVObject new RxAVObject() 代表的一个 free-schema 的对象 Methods &lt;static&gt; createSubclass(ctor, objectId) 根据子类类型以及 objectId 创建子类实例 Parameters: Name Type Description ctor T objectId string Returns: Type T &lt;static&gt; createWithoutData(classnName, objectId) 根据 className 和 objectId 构建一个对象 Parameters: Name Type Description classnName string 表名称 objectId string objectId Returns: Type RxAVObject &lt;static&gt; get() 获取当前对象的 className &lt;static&gt; get() 获取当前对象的 objectId &lt;static&gt; saveAll(objects) 批量保存 RxAVObject Parameters: Name Type Description objects Array.&lt;RxAVObject&gt; 需要批量保存的 RxAVObject 数组 &lt;static&gt; set() 设置当前对象的 objectId &lt;static&gt; set() 设置当前对象的 className fetch() 从服务端获取数据覆盖本地的数据 Returns: Type Observable.&lt;RxAVObject&gt; fetchRelation(key, targetClassName) 查询 Relation 包含的对象数组 Parameters: Name Type Description key string targetClassName any Returns: Type Observable.&lt;Array.&lt;RxAVObject&gt;&gt; remove(key) 删除指定属性上的值 Parameters: Name Type Description key string save() 将当前对象保存到云端. 如果对象的 objectId 为空云端会根据现有的数据结构新建一个对象并返回一个新的 objectId. Returns: Type Observable.&lt;boolean&gt; × Search results Close Documentation generated by JSDoc 3.4.3 on March 1st 2017, 11:35:11 pm using the DocStrap template. "},"RxAVPush.html":{"id":"RxAVPush.html","title":"Class: RxAVPush","body":" Documentation Classes RxAVACLRxAVAnalyticsRxAVClientRxAVInstallationRxAVObjectRxAVPushRxAVQueryRxAVRoleRxAVUser Class: RxAVPush RxAVPush new RxAVPush() 一条推送消息 Methods &lt;static&gt; sendContent(data:{(string, filter:{{) 发送推送给符合查询条件的 _Installation Parameters: Name Type Description data:{(string Object | { [key: string]: any })} filter:{{ Object channels?: Array, query?: RxAVQuery, prod?: string }} Returns: 返回是否成功刚发送 Type Observable.&lt;boolean&gt; &lt;static&gt; sendTo(user, data:{(string, prod) 向 RxAVUser 发送推送消息 Parameters: Name Type Description user RxAVUser data:{(string any | { [key: string]: any })} prod string Returns: 返回是否成功刚发送 Type Observable.&lt;boolean&gt; send() 发送 Returns: Type Observable.&lt;boolean&gt; × Search results Close Documentation generated by JSDoc 3.4.3 on March 1st 2017, 11:35:11 pm using the DocStrap template. "},"RxAVQuery.html":{"id":"RxAVQuery.html","title":"Class: RxAVQuery","body":" Documentation Classes RxAVACLRxAVAnalyticsRxAVClientRxAVInstallationRxAVObjectRxAVPushRxAVQueryRxAVRoleRxAVUser Class: RxAVQuery RxAVQuery new RxAVQuery() 针对 RxAVObject 的查询构建类 Methods &lt;static&gt; or(queries) Parameters: Name Type Argument Description queries Array.&lt;RxAVQuery&gt; &lt;repeatable&gt; Returns: Type RxAVQuery find() 执行查询 Returns: Type Observable.&lt;Array.&lt;RxAVObject&gt;&gt; × Search results Close Documentation generated by JSDoc 3.4.3 on March 1st 2017, 11:35:11 pm using the DocStrap template. "},"RxAVRole.html":{"id":"RxAVRole.html","title":"Class: RxAVRole","body":" Documentation Classes RxAVACLRxAVAnalyticsRxAVClientRxAVInstallationRxAVObjectRxAVPushRxAVQueryRxAVRoleRxAVUser Class: RxAVRole RxAVRole RxAVRole 一个角色对应的是 _Role 表里的一个对象 new RxAVRole() 角色 Extends RxAVObject Methods &lt;static&gt; createWithName(name, objectId) 根据名字以及 objectId 构建 Role Parameters: Name Type Description name string objectId string Returns: Type RxAVRole &lt;static&gt; createWithoutData( [objectId]) 根据 objectId 构建 Role Parameters: Name Type Argument Description objectId string &lt;optional&gt; Returns: Type RxAVRole &lt;static&gt; RxAVRole( [name] [, users] [, roles] [, acl]) Creates an instance of RxAVRole. Parameters: Name Type Argument Description name string &lt;optional&gt; 角色名称 users Array.&lt;RxAVUser&gt; &lt;optional&gt; 拥有当前角色的用户 roles Array.&lt;RxAVRole&gt; &lt;optional&gt; 继承当前角色的角色 acl RxAVACL &lt;optional&gt; 当前 RxAVRole 的 ACL，这里规定了谁能对当前 RxAVRole 进行后续的操作 deny(args) 取消当前用户对 args 包含的 Role 和 User 的关联，args 包含的 Role 和 User 将不再具备当前 Role 的权限 Parameters: Name Type Argument Description args Array.&lt;any&gt; &lt;repeatable&gt; Array or Array Returns: Type Observable.&lt;boolean&gt; fetch() 从服务端获取数据覆盖本地的数据 Inherited From: RxAVObject#fetch Returns: Type Observable.&lt;RxAVObject&gt; fetchRelation(key, targetClassName) 查询 Relation 包含的对象数组 Parameters: Name Type Description key string targetClassName any Inherited From: RxAVObject#fetchRelation Returns: Type Observable.&lt;Array.&lt;RxAVObject&gt;&gt; grant(args) 将当前 Role 的权限授予给 args 里面包含的 Role 和 User Parameters: Name Type Argument Description args Array.&lt;any&gt; &lt;repeatable&gt; Array or Array Returns: Type Observable.&lt;boolean&gt; remove(key) 删除指定属性上的值 Parameters: Name Type Description key string Inherited From: RxAVObject#remove save() 将当前对象保存到云端. 如果对象的 objectId 为空云端会根据现有的数据结构新建一个对象并返回一个新的 objectId. Inherited From: RxAVObject#save Returns: Type Observable.&lt;boolean&gt; × Search results Close Documentation generated by JSDoc 3.4.3 on March 1st 2017, 11:35:11 pm using the DocStrap template. "},"RxAVUser.html":{"id":"RxAVUser.html","title":"Class: RxAVUser","body":" Documentation Classes RxAVACLRxAVAnalyticsRxAVClientRxAVInstallationRxAVObjectRxAVPushRxAVQueryRxAVRoleRxAVUser Class: RxAVUser RxAVUser RxAVUser 一个用户对应的是 _User 的一个对象，它的查询权限是关闭的，默认是不可以通过 RxAVQuery 查询用户的 new RxAVUser() 用户 Extends RxAVObject Methods &lt;static&gt; current() 获取本地缓存文件里面是否存在已经登录过的用户 &lt;static&gt; get() 获取用户名 &lt;static&gt; get() 用户的鉴权信息 &lt;static&gt; get() 手机号 &lt;static&gt; logIn(username, password) 使用用户名和密码登录 Parameters: Name Type Description username string 用户名 password string 密码 Returns: Type Observable.&lt;RxAVUser&gt; &lt;static&gt; logInByMobilephone(mobilephone, shortCode) 使用手机号以及验证码登录 Parameters: Name Type Description mobilephone string shortCode string Returns: Type Observable.&lt;RxAVUser&gt; &lt;static&gt; logInWithMobilephone(mobilephone, password) 使用手机号+密码登录 Parameters: Name Type Description mobilephone string 手机号 password string 密码 Returns: Type Observable.&lt;RxAVUser&gt; &lt;static&gt; sendLogInShortcode(mobilephone) 发送登录时需要的验证码 Parameters: Name Type Description mobilephone string 手机号 Returns: Type Observable.&lt;boolean&gt; &lt;static&gt; sendSignUpShortcode(mobilephone) 发送注册用户时需要的验证码 Parameters: Name Type Description mobilephone string 手机号 Returns: Type Observable.&lt;boolean&gt; &lt;static&gt; set() 只有新用户可以设置密码，已注册用户调用这个接口会抛出异常 &lt;static&gt; set() 设置手机号 &lt;static&gt; set() 新用户设置用户名，已注册用户调用这个接口会抛出异常 &lt;static&gt; signUpByMobilephone(mobilephone, shortCode) 使用手机号以及验证码创建新用户 Parameters: Name Type Description mobilephone string 手机号，目前支持几乎所有主流国家 shortCode string 6位数的数字组成的字符串 Returns: Type Observable.&lt;RxAVUser&gt; activate(installation, unique) 将一个 RxAVInstallation 对象绑定到 RxAVUser Parameters: Name Type Description installation RxAVInstallation unique boolean Returns: 是否成功地绑定了当前设备和 User 的关系 Type Observable.&lt;boolean&gt; create(user) 创建一个用户，区别于 signUp，调用 create 方法并不会覆盖本地的 currentUser. Parameters: Name Type Description user RxAVUser Returns: Type Observable.&lt;boolean&gt; fetch() 从服务端获取数据覆盖本地的数据 Inherited From: RxAVObject#fetch Returns: Type Observable.&lt;RxAVObject&gt; fetchRelation(key, targetClassName) 查询 Relation 包含的对象数组 Parameters: Name Type Description key string targetClassName any Inherited From: RxAVObject#fetchRelation Returns: Type Observable.&lt;Array.&lt;RxAVObject&gt;&gt; fetchRoles() 从服务端获取当前用户所拥有的角色 Returns: Type Observable.&lt;Array.&lt;RxAVRole&gt;&gt; inactive(installation) 取消对当前设备的绑定 Parameters: Name Type Description installation RxAVInstallation Returns: 是否成功的解绑 Type Observable.&lt;boolean&gt; isAuthenticated() 判断当前用户的鉴权信息是否有效 Returns: Type Observable.&lt;boolean&gt; logOut() 登出系统，删除本地缓存 Returns: Type Observable.&lt;boolean&gt; remove(key) 删除指定属性上的值 Parameters: Name Type Description key string Inherited From: RxAVObject#remove save() 将当前对象保存到云端. 如果对象的 objectId 为空云端会根据现有的数据结构新建一个对象并返回一个新的 objectId. Inherited From: RxAVObject#save Returns: Type Observable.&lt;boolean&gt; signUp() 使用当前用户的信息注册到 LeanCloud _User 表中 Returns: 返回一个可订阅的对象，尽管是 void，但是当前 AVUser 实例对象里面的 sessionToken，objectId 都已更新 Type Observable.&lt;void&gt; × Search results Close Documentation generated by JSDoc 3.4.3 on March 1st 2017, 11:35:11 pm using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
